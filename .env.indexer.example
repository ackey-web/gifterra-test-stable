# ========================================
# Gifterraインデクサー 環境変数設定
# ========================================

# 🔧 使い方:
# 1. このファイルを .env.indexer にコピー
# 2. 必要な値を設定
# 3. `USE_GIFTERRA=true pnpm indexer` で起動

# ========================================
# ブロックチェーン設定
# ========================================

# RPC URL (Polygon Amoy Testnet)
RPC_URL=https://rpc-amoy.polygon.technology

# Gifterraコントラクトアドレス (SBT Contract)
GIFTERRA_ADDRESS=0x0174477A1FCEb9dE25289Cd1CA48b6998C9cD7FC

# JPYCトークンアドレス
TOKEN_ADDRESS=0xE7C3D8C9a439feDe00D2600032D5dB0Be71C3c29

# バックフィル開始ブロック（初回実行時のみ）
# コントラクトデプロイブロックを指定してください
START_BLOCK=12345678

# ========================================
# Supabase設定
# ========================================

# Supabase プロジェクトURL
# 取得方法: Supabase Dashboard > Project Settings > API > URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase サービスロールキー
# 取得方法: Supabase Dashboard > Project Settings > API > service_role key
SUPABASE_KEY=your-service-role-key-here

# ========================================
# インデクサー設定
# ========================================

# Gifterraインデクサーを使用（必須: true）
USE_GIFTERRA=true

# バックフィル有効化（初回実行時: true、通常実行時: false）
ENABLE_BACKFILL=true

# バックフィルのチャンクサイズ（RPCレート制限に応じて調整）
BACKFILL_CHUNK_SIZE=10000

# デイリースナップショット有効化
ENABLE_DAILY_SNAPSHOT=true

# スナップショット実行時刻 (HH:MM形式、UTC)
SNAPSHOT_CRON=00:00

# ========================================
# API設定
# ========================================

# APIサーバーポート
API_PORT=3001

# Admin API キー（管理エンドポイント認証用）
ADMIN_API_KEY=your-admin-api-key-here

# ========================================
# 注意事項
# ========================================
#
# 🔐 セキュリティ:
# - SUPABASE_KEY（service_role）は絶対に公開しないでください
# - .gitignoreに .env.indexer が含まれていることを確認してください
#
# 📊 初回実行:
# - ENABLE_BACKFILL=true で過去のイベントを全て取得
# - 完了後は ENABLE_BACKFILL=false に変更して再起動
#
# 🔄 継続実行:
# - インデクサーは常時稼働してリアルタイムでイベントを監視
# - systemdやpm2などのプロセスマネージャーを推奨
#
# 💾 データベース:
# - Supabaseマイグレーションを先に実行してください
#   (supabase/migrations/20250129_*.sql)
