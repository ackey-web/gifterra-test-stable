const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BDhfQJ6j.js","assets/index-C5Vjv8TC.css"])))=>i.map(i=>d[i]);
import{bc as m,B as f,aQ as h,f as l,E as d}from"./index-BDhfQJ6j.js";import{C as w,a as _}from"./setErc20Allowance-7f76f677.browser.esm-Bx9Fj7nH.js";const y=m("0x80ac58cd"),C=m("0xd9b67a26"),E={name:"Failed to load NFT metadata"};async function R(t,a,e){if(a.startsWith("data:application/json;base64")&&typeof Buffer<"u"){const o=a.split(",")[1],s=JSON.parse(Buffer.from(o,"base64").toString("utf-8"));return _.parse({...s,id:f.from(t).toString(),uri:a})}const n=a.replace("{id}",h(f.from(t).toHexString(),32).slice(2));let r;try{r=await e.downloadJSON(n)}catch{const s=a.replace("{id}",f.from(t).toString());try{r=await e.downloadJSON(s)}catch{console.warn(`failed to get token metadata: ${JSON.stringify({tokenId:t.toString(),tokenUri:a})} -- falling back to default metadata`),r=E}}return _.parse({...r,id:f.from(t).toString(),uri:a})}async function F(t,a,e,n){let r;const o=(await l(async()=>{const{default:i}=await import("./IERC165-ODxXmlQV.js");return{default:i}},[])).default,s=new d(t,o,a),[p,b]=await Promise.all([s.supportsInterface(y),s.supportsInterface(C)]);if(p){const i=(await l(async()=>{const{default:c}=await import("./index-BDhfQJ6j.js").then(u=>u.f0);return{default:c}},__vite__mapDeps([0,1]))).default;r=await new d(t,i,a).tokenURI(e)}else if(b){const i=(await l(async()=>{const{default:c}=await import("./index-BDhfQJ6j.js").then(u=>u.f2);return{default:c}},__vite__mapDeps([0,1]))).default;r=await new d(t,i,a).uri(e)}else throw Error("Contract must implement ERC 1155 or ERC 721.");return r?R(e,r,n):_.parse({...E,id:f.from(e).toString(),uri:""})}async function S(t,a){return typeof t=="string"?t:await a.upload(w.parse(t))}async function A(t,a,e,n){if(I(t))return t;if(T(t))return await a.uploadBatch(t.map(o=>w.parse(o)),{rewriteFileNames:{fileStartNumber:e||0},onProgress:n?.onProgress});throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function x(t){const a=t[0].substring(0,t[0].lastIndexOf("/"));for(let e=0;e<t.length;e++){const n=t[e].substring(0,t[e].lastIndexOf("/"));if(a!==n)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${a}' but got '${n}'`)}return a.replace(/\/$/,"")+"/"}function I(t){return t.find(a=>typeof a!="string")===void 0}function T(t){return t.find(a=>typeof a!="object")===void 0}const L=100;export{L as D,E as F,y as I,C as a,R as b,A as c,F as f,x as g,S as u};
